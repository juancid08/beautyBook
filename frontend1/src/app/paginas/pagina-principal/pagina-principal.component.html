<div class="navbar-container fade-in">
  <video #bgVideo autoplay muted loop class="navbar-video zoom-in">
    <source src="/assets/video/hero_section.mp4" type="video/mp4" />
    Tu navegador no soporta videos HTML5.
  </video>

  <app-navbar-superior></app-navbar-superior>

  <div class="botones">
    <ng-container *ngIf="usuarioActual; else noLogin">
      <div class="bienvenida">
        <span>Bienvenido/a, {{ usuarioActual.nombre }}</span>
      </div>
      <img
        src="/assets/image/icono_empleados.png"
        class="foto-perfil w-10 h-10 rounded-full cursor-pointer"
        (click)="goPerfil()"
      />
      <button class="logout" (click)="logout()">
        <i class="fas fa-right-from-bracket"></i>
        Cerrar SesiÃ³n
      </button>
      <button class="registrar" *ngIf="!tieneSalon" (click)="onRegistrarNegocio()">
        Registra tu negocio
      </button>
    </ng-container>

    <ng-template #noLogin>
      <button class="login-btn" (click)="onLogin()">
        <i class="fas fa-sign-in-alt"></i>
        <div class="text-lines">
          <span>Iniciar</span>
          <span>SesiÃ³n/Registrarse</span>
        </div>
      </button>
      <button class="registrar" *ngIf="!tieneSalon" (click)="onRegistrarNegocio()">
        Registra tu negocio
      </button>
    </ng-template>
  </div>

  <div class="navbar-medio slide-in-down">
    <div class="frases-container">
      <p class="frases typewriter">
        {{ displayedText }}<span class="cursor">|</span>
      </p>
    </div>

    <div class="buscador">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchSuggest()"
        (keyup.enter)="onSearch()"
        placeholder="Consultar negocios y servicios disponibles"
        class="form-control"
      />

      <ul *ngIf="sugerencias.length > 0" class="sugerencias-list">
        <li *ngFor="let sugerencia of sugerencias" class="sugerencia-item">
          <span (click)="selectSugerencia(sugerencia)" class="sugerencia-text">
            {{ sugerencia }}
          </span>
          <button (click)="setSearchOnly(sugerencia); $event.stopPropagation()" class="btn-sugerencia">
            ðŸ“‹
          </button>
        </li>
      </ul>

      <p *ngIf="sugerencias.length === 0 && searchTerm" class="no-results">
        No se encontraron resultados para "{{ searchTerm }}"
      </p>

      <button class="buscar" (click)="onSearch()">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </div>

  <div class="navbar-inferior fade-in-delay">
    <div class="categorias">
      <a
        *ngFor="let cat of categories"
        (click)="filterBy(cat)"
        [class.active]="cat === selectedCategory"
        href="javascript:void(0)"
      >
        {{ cat }}
      </a>
    </div>
  </div>
</div>

<div class="contenido-pagina fade-container">
  <h1>{{ tituloCategoria }}</h1>

  <div class="slider-wrapper">
    <button class="nav-arrow left" (click)="scrollLeft()">
      <i class="fas fa-chevron-left"></i>
    </button>

    <div #cardsContainer class="cards-container">
      <div
        class="card animate-card"
        *ngFor="let salon of salones"
        (click)="goBarberShopDetails(salon)"
      >
        <div class="image-wrapper">
          <img [src]="salon.foto || '/assets/image/default-salon.png'" [alt]="salon.nombre" />
          <div class="rating">{{ salon.rating?.toFixed(1) || "N/A" }} â˜…</div>
        </div>

        <div class="card-body">
          <h2 class="salon-name">{{ salon.nombre }}</h2>
          <p class="salon-street">{{ salon.direccion }}</p>
          <button class="like-btn" (click)="toggleLike(salon); $event.stopPropagation()">
            <i class="fas" [ngClass]="salon.liked ? 'fa-heart' : 'fa-heart-o'"></i>
          </button>
        </div>
      </div>
    </div>

    <button class="nav-arrow right" (click)="scrollRight()">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>
</div>

<div class="pre-footer fade-in-up">
  <div class="pre-footer-content">
    <div class="texto">
      <h4><strong>Tu cita de belleza, mÃ¡s fÃ¡cil que nunca</strong></h4>
      <p>
        Â¿Buscas a un barbero, peluquero, masajista o manicurista cerca de ti?
        Â¿Te gustarÃ­a agendar una sesiÃ³n para darle forma a tu barba, definir tus
        cejas o disfrutar de un masaje profundo?
        <br /><br />
        Con BeautyBook podrÃ¡s agendar tu cita en segundos.
        <br /><br />
        <strong>Descubre los mejores profesionales de tu zona y agenda al instante.</strong>
      </p>
    </div>

    <div class="imagen">
      <img src="/assets/image/pagina1.webp" alt="Foto de contenido principal" />
    </div>
  </div>
</div>

<br /><br /><br /><br /><br /><br /><br /><br />
<app-footer></app-footer>
