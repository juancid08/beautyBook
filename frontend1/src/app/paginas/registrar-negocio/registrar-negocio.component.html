<app-navbar></app-navbar>

<main class="mt-12 max-w-2xl mx-auto px-4 py-12">
  <ng-container *ngIf="paso === 1">
    <h2 class="text-2xl font-bold text-center mb-4">
      ¿Qué tipo de negocio tienes?
    </h2>
    <p class="text-center text-gray-600 mb-6">
      Selecciona la categoría que mejor representa tu negocio.
    </p>

    <div class="grid grid-cols-3 gap-4 mb-4">
      <button
        *ngFor="let item of especializaciones.slice(0, 3)"
        (click)="seleccionarTipo(item.valor)"
        class="flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition"
        type="button"
      >
        <img
          [src]="item.imagen"
          alt="{{ item.nombre }}"
          class="w-16 h-16 rounded-full mb-2 object-cover"
        />
        <span class="text-sm font-medium text-center">{{ item.nombre }}</span>
      </button>
    </div>

    <div class="flex justify-center gap-4">
      <button
        *ngFor="let item of especializaciones.slice(3, 5)"
        (click)="seleccionarTipo(item.valor)"
        class="flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition w-1/3"
        type="button"
      >
        <img
          [src]="item.imagen"
          alt="{{ item.nombre }}"
          class="w-16 h-16 rounded-full mb-2 object-cover"
        />
        <span class="text-sm font-medium text-center">{{ item.nombre }}</span>
      </button>
    </div>
  </ng-container>

  <ng-container *ngIf="paso === 2">
    <div class="max-w-2xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8">
      <h2 class="text-3xl font-semibold text-center text-gray-800 mb-8">
        Completa la información de tu negocio
      </h2>

      <form (ngSubmit)="registrarSalon()" novalidate class="space-y-6">
        <!-- Grid de inputs: 1 columna en móvil, 2 en md+ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Nombre del salón -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Nombre del salón <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.nombre"
              name="nombre"
              required
              placeholder="Ej. Salón Belleza Plus"
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>

          <!-- Dirección -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Dirección <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.direccion"
              name="direccion"
              required
              placeholder="Calle Falsa 123"
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>

          <!-- CIF -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              CIF <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.cif"
              name="cif"
              required
              placeholder="B12345678"
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>

          <!-- Teléfono -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Teléfono <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.telefono"
              name="telefono"
              required
              placeholder="+34 600 123 456"
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>

          <!-- Email (ocupa las 2 columnas) -->
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Correo electrónico <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.email"
              name="email"
              type="email"
              required
              placeholder="tucorreo@ejemplo.com"
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>

          <!-- Descripción (ocupa las 2 columnas) -->
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Descripción (opcional)
            </label>
            <textarea
              [(ngModel)]="datosNegocio.descripcion"
              name="descripcion"
              rows="3"
              placeholder="Cuéntanos algo sobre tu negocio..."
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none resize-none"
            ></textarea>
          </div>

          <!-- Horarios -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Apertura <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.horario_apertura"
              name="horario_apertura"
              type="time"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">
              Cierre <span class="text-red-500">*</span>
            </label>
            <input
              [(ngModel)]="datosNegocio.horario_cierre"
              name="horario_cierre"
              type="time"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none"
            />
          </div>
        </div>

        <!-- Upload de foto -->
        <div class="space-y-2">
          <!-- Etiqueta descriptiva -->
          <label class="block text-sm font-medium text-gray-700">
            Foto del negocio
          </label>

          <!-- Botón personalizado con emoji -->
          <label
            class="inline-flex items-center px-4 py-2 bg-[#117b95] text-white rounded-lg cursor-pointer hover:bg-[#0e6378] transition"
          >
            <!-- Emoji de cámara -->
            <span class="mr-2 text-lg">📸</span>
            <span>Seleccionar archivo</span>

            <!-- Input real oculto -->
            <input
              type="file"
              name="foto"
              accept="image/*"
              (change)="onFileChange($event)"
              class="hidden"
            />
          </label>

          <!-- Previsualización -->
          <div *ngIf="imagenPreview" class="mt-4">
            <p class="text-sm text-gray-500 mb-2">Previsualización:</p>
            <img
              [src]="imagenPreview"
              alt="Previsualización"
              class="w-full max-h-64 object-cover rounded-lg shadow-sm"
            />
          </div>
        </div>

        <!-- Botón y mensajes -->
        <div class="space-y-3">
          <button
            type="submit"
            [disabled]="cargando"
            class="w-full py-3 rounded-lg text-white bg-[#117b95] hover:bg-[#0e6378] transition disabled:opacity-50"
          >
            {{ cargando ? "Registrando..." : "Registrar negocio" }}
          </button>
          <p
            *ngIf="mensajeExito"
            class="text-center text-green-600 font-medium"
          >
            {{ mensajeExito }}
          </p>
          <p *ngIf="mensajeError" class="text-center text-red-600 font-medium">
            {{ mensajeError }}
          </p>
        </div>
      </form>
    </div>
  </ng-container>
</main>
<br /><br /><br />
<br /><br /><br />

<app-footer></app-footer>
