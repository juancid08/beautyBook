<app-navbar></app-navbar>

<main class="max-w-2xl mx-auto px-4 py-12">
  <ng-container *ngIf="paso === 1">
    <h2 class="text-2xl font-bold text-center mb-4">¿Qué tipo de negocio tienes?</h2>
    <p class="text-center text-gray-600 mb-6">
      Selecciona la categoría que mejor representa tu negocio.
    </p>

    <div class="grid grid-cols-3 gap-4 mb-4">
      <button
        *ngFor="let item of especializaciones.slice(0, 3)"
        (click)="seleccionarTipo(item.valor)"
        class="flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition"
        type="button"
      >
        <img [src]="item.imagen" alt="{{ item.nombre }}" class="w-16 h-16 rounded-full mb-2 object-cover" />
        <span class="text-sm font-medium text-center">{{ item.nombre }}</span>
      </button>
    </div>

    <div class="flex justify-center gap-4">
      <button
        *ngFor="let item of especializaciones.slice(3, 5)"
        (click)="seleccionarTipo(item.valor)"
        class="flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-md transition w-1/3"
        type="button"
      >
        <img [src]="item.imagen" alt="{{ item.nombre }}" class="w-16 h-16 rounded-full mb-2 object-cover" />
        <span class="text-sm font-medium text-center">{{ item.nombre }}</span>
      </button>
    </div>
  </ng-container>

  <ng-container *ngIf="paso === 2">
    <div class="max-w-md mx-auto bg-white shadow-md rounded-2xl p-8">
      <h2 class="text-2xl font-semibold text-center text-gray-800 mb-6">Completa la información de tu negocio</h2>

      <form (ngSubmit)="registrarSalon()" class="space-y-5" novalidate>
        <div class="flex flex-col">
          <input
            [(ngModel)]="datosNegocio.nombre"
            name="nombre"
            required
            placeholder="Nombre del salón"
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <input
            [(ngModel)]="datosNegocio.direccion"
            name="direccion"
            required
            placeholder="Dirección"
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <input
            [(ngModel)]="datosNegocio.cif"
            name="cif"
            required
            placeholder="CIF"
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <input
            [(ngModel)]="datosNegocio.telefono"
            name="telefono"
            required
            placeholder="Teléfono"
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <input
            [(ngModel)]="datosNegocio.email"
            name="email"
            type="email"
            required
            placeholder="Correo electrónico"
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <textarea
            [(ngModel)]="datosNegocio.descripcion"
            name="descripcion"
            rows="3"
            placeholder="Descripción (opcional)"
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          ></textarea>
        </div>

        <div class="flex flex-col">
          <label for="horario_apertura" class="mb-1 font-medium text-gray-700">Horario de apertura</label>
          <input
            [(ngModel)]="datosNegocio.horario_apertura"
            name="horario_apertura"
            id="horario_apertura"
            type="time"
            required
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <label for="horario_cierre" class="mb-1 font-medium text-gray-700">Horario de cierre</label>
          <input
            [(ngModel)]="datosNegocio.horario_cierre"
            name="horario_cierre"
            id="horario_cierre"
            type="time"
            required
            class="px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-[#117b95] focus:outline-none text-gray-700"
          />
        </div>

        <div class="flex flex-col">
          <label class="mb-2 text-sm text-gray-600 font-medium">Foto del negocio</label>
          <input
            type="file"
            name="foto"
            (change)="onFileChange($event)"
            accept="image/*"
            class="px-4 py-2 rounded-xl border border-gray-300 text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#117b95]"
          />
            <div *ngIf="imagenPreview" class="mt-4">
                <p class="text-sm text-gray-500 mb-2">Previsualización:</p>
                <img [src]="imagenPreview" alt="Previsualización" class="rounded-xl w-full object-cover max-h-64 shadow-md" />
            </div>
        </div>

        <button
          type="submit"
          [disabled]="cargando"
          class="w-full bg-[#117b95] text-white py-3 rounded-xl hover:bg-[#0e6378] transition disabled:opacity-50"
        >
          {{ cargando ? 'Registrando...' : 'Registrar negocio' }}
        </button>

        <p *ngIf="mensajeExito" class="text-green-600 font-semibold mt-3 text-center">{{ mensajeExito }}</p>
        <p *ngIf="mensajeError" class="text-red-600 font-semibold mt-3 text-center">{{ mensajeError }}</p>
      </form>
    </div>
  </ng-container>
</main>

<app-footer></app-footer>
